%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,a4paper]{article}

% character encoding
\usepackage[utf8]{inputenc}

% font encoding (underscores)
\usepackage[T1]{fontenc}

% colors
\usepackage{xcolor}

% math
\usepackage{amsmath}
\usepackage{amssymb}

% hyperlinks
\usepackage{hyperref}

% tables
\usepackage{tabu}
\usepackage{longtable}
\usepackage{caption}
% \captionsetup[longtable]{skip=0.5\baselineskip}
\usepackage{multirow}

% code
\usepackage{listings}
\lstset{
  aboveskip=\bigskipamount,
  belowskip=\bigskipamount,
  captionpos=b,
  abovecaptionskip=\bigskipamount,
  belowcaptionskip=\bigskipamount,
  escapeinside=@@,
  keepspaces=true,
  columns=fullflexible,
}
\lstdefinelanguage[concubine]{Assembler}{
  morekeywords={[1]LOAD,STORE,FENCE,ADD,ADDI,SUB,SUBI,JZ,CHECK,HALT,EXIT,FLUSH},
  morecomment=[l]\#,
  basicstyle=\ttfamily,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  % keepspaces,
  % columns=fullflexible,
  % tabsize=6,
  % xleftmargin=\parindent,
}
\lstdefinestyle{c++}{
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  % keepspaces=true,
  % columns=fullflexible,
  % frame=L,
  % xleftmargin=\parindent,
  language=C++,
  showstringspaces=false,
  alsoletter={:},
  morekeywords={
    % Instruction,
    % map,
    std::map,
    std::ostringstream,
    std::set,
    % string,
    std::string,
    std::to_string,
    % unordered_map,
    % vector,
    std::vector,
    std::size_t,
    uint,
  },
  % basicstyle=\footnotesize\ttfamily,
  basicstyle=\small\ttfamily,
  keywordstyle=\sffamily\bfseries\color{blue},
  % commentstyle=\itshape\color{purple!40!black},
  commentstyle=\itshape\color{gray},
  % identifierstyle=\color{blue},
  stringstyle=\color{red!60!black},
}
\lstdefinelanguage{SMTLib}{
  breaklines=true,
  morekeywords={[1]declare-fun, assert, =, =>, and, ite, not},
  morekeywords={[2]BitVec},
  alsoletter={-, =, >},
  morecomment=[l]\;,
  sensitive=false,
  basicstyle=\small\ttfamily,
  commentstyle=\color{gray},
  % keywordstyle=\bfseries
  keywordstyle=[1]\bfseries\color{green!40!black},
  keywordstyle=[2]\bfseries\color{red!40!black},
  % identifierstyle=\color{blue},
}

% tikz
\usepackage{tikz}
\usetikzlibrary{positioning}
\tikzset{>=latex}

% grammars
\usepackage{syntax}
\setlength{\grammarparsep}{0pt}

% algorithms
\usepackage{algorithm2e}

% todos
\setlength{\marginparwidth}{2cm}
\usepackage{todonotes}
\setuptodonotes{size=\footnotesize, shadow}
\usepackage{marginnote}
\renewcommand{\marginpar}{\marginnote}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% state variables
\newcommand{\HEAP}{\texttt{heap}}
\newcommand{\EXIT}{\texttt{exit}}
\newcommand{\EXITCODE}{\texttt{exit-code}}

\newcommand{\ACCU}{\texttt{accu}}
\newcommand{\MEM}{\texttt{mem}}
\newcommand{\SBADR}{\texttt{sb-adr}}
\newcommand{\SBVAL}{\texttt{sb-val}}
\newcommand{\SBFULL}{\texttt{sb-full}}
\newcommand{\STMT}{\texttt{stmt}}
\newcommand{\BLOCK}{\texttt{block}}
\newcommand{\HALT}{\texttt{halt}}

% transition variables
\newcommand{\THREAD}{\texttt{thread}}
\newcommand{\EXEC}{\texttt{exec}}
\newcommand{\FLUSH}{\texttt{flush}}
\newcommand{\CHECK}{\texttt{check}}

% sorts
\newcommand{\ASORT}[1][16]{\mathcal{A}^{#1}}
\newcommand{\BVSORT}[1][16]{\mathcal{B}^{#1}}

% todos
% \newcommand{\todo}[1]{
  % \begin{flushleft}
    % \color{red}
    % $\rightarrow$ #1
  % \end{flushleft}
% }

% \newcommand{\todonote}[1]{
  % $^{\color{red}#1}$
% }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% \input{cover/coversheet}

\tableofcontents

\newpage

\listoffigures

\newpage

\input{introduction}

\newpage

\input{machine}

\newpage

\input{execution}

\newpage

\input{encoding}

\newpage

\input{conclusion}

\newpage

\bibliographystyle{plain}
\bibliography{references}

\newpage

\listoftodos

\end{document}
